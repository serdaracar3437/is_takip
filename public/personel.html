<!DOCTYPE html>
</div>


<div>
<label for="hata_sayisi3">Hata Sayısı 3</label>
<input id="hata_sayisi3" type="number" placeholder="0" />
</div>
</div>


<div class="row" style="margin-top:10px;">
<button class="btn" onclick="saveTask()">Kaydet</button>
<a class="link" href="tasks.html">Görevleri Gör</a>
<a class="link" href="logout.html">Çıkış Yap</a>
</div>


<p class="note" id="note"></p>
</main>


<script>
async function saveTask(){
const note = document.getElementById("note");
note.textContent = "";


const payload = {
username: username.value.trim(),
isemri_numarasi: isemri_numarasi.value.trim() || null,
urun_kodu: urun_kodu.value.trim() || null,
tarih: tarih.value || null,
yapilan_faaliyet: yapilan_faaliyet.value.trim() || null,
aciklama: aciklama.value.trim() || null,
kullanilan_malzeme: kullanilan_malzeme.value.trim() || null,
baslama_saati: baslama_saati.value || null,
bitis_saati: bitis_saati.value || null,
islem_adedi: islem_adedi.value ? String(islem_adedi.value) : null,
hata_kodu1: hata_kodu1.value.trim() || null,
hata_sayisi1: hata_sayisi1.value ? String(hata_sayisi1.value) : null,
hata_kodu2: hata_kodu2.value.trim() || null,
hata_sayisi2: hata_sayisi2.value ? String(hata_sayisi2.value) : null,
hata_kodu3: hata_kodu3.value.trim() || null,
hata_sayisi3: hata_sayisi3.value ? String(hata_sayisi3.value) : null
};


if(!payload.username){note.textContent="Kullanıcı adı boş olamaz.";return;}


try{
const res = await fetch("/api/tasks",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(payload)
});
const json = await res.json();


if(!res.ok){note.textContent="Hata: "+(json.error||"Sunucu hatası");return;}


note.textContent="Görev kaydedildi.";
}catch(err){note.textContent="İstek hatası: "+err.message;}
}
</script>
</body>
</html>